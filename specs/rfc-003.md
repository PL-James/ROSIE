---
layout: page
title: "RFC-003: Evidence Standard"
description: Schema for automated qualification evidence — 21 CFR Part 11 compliant artifact packaging
permalink: /specs/rfc-003/
show_sidebar: true
---

<div class="metadata-table">

| Field  | Value                                                                |
| ------ | -------------------------------------------------------------------- |
| RFC ID | 003                                                                  |
| Title  | ROSIE Evidence Standard: Schema for Automated Qualification Evidence |
| Status | Draft                                                                |
| Focus  | 21 CFR Part 11 compliance, evidence schemas, immutable logs          |

</div>

---

## 1. Scope

This RFC defines the structure of the `gxp-execution.json` artifact. It ensures that automated test outputs (OQ/PQ) are captured in a format that satisfies regulatory requirements for electronic records, including environment state, visual evidence, and execution telemetry.

---

## 2. Evidence Package Structure

The evidence package is a JSON-LD compliant object that aggregates execution metadata.

### 2.1 `gxp-execution.json` Schema

```json
{
  "execution_id": "uuid-v4",
  "timestamp": "ISO-8601",
  "commit_sha": "git-sha",
  "environment": {
    "os": "ubuntu-22.04",
    "runtime": "node-v18.1.0",
    "container_digest": "sha256:...",
    "sbom_ref": "path/to/sbom.json"
  },
  "results": [
    {
      "gxp_id": "AL-OQ-AUTH-01",
      "status": "PASS",
      "duration_ms": 120,
      "logs": ["..."],
      "attachments": [
        {
          "type": "screenshot",
          "hash": "sha256:...",
          "uri": "s3://bucket/evidence/PQ-05.png"
        }
      ]
    }
  ],
  "signature": {
    "signed_by": "BuildAgent-01",
    "hash_method": "SHA-256",
    "value": "..."
  }
}
```

---

## 3. Schema Field Definitions

### 3.1 Root Fields

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| `execution_id` | UUID v4 | Yes | Unique identifier for this test run |
| `timestamp` | ISO-8601 | Yes | UTC timestamp when execution completed |
| `commit_sha` | string | Yes | Git commit SHA being tested |
| `environment` | object | Yes | Execution environment details |
| `results` | array | Yes | Array of test results |
| `signature` | object | Yes | Cryptographic signature of the package |

### 3.2 Environment Object

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| `os` | string | Yes | Operating system and version |
| `runtime` | string | Yes | Language runtime and version |
| `container_digest` | string | No | Docker image digest if containerized |
| `sbom_ref` | string | No | Path to Software Bill of Materials |

### 3.3 Result Object

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| `gxp_id` | string | Yes | The `@gxp-id` of the test |
| `status` | enum | Yes | `PASS`, `FAIL`, `SKIP`, `ERROR` |
| `duration_ms` | number | Yes | Execution time in milliseconds |
| `logs` | array | No | Captured stdout/stderr |
| `attachments` | array | No | Evidence files (screenshots, exports) |

### 3.4 Attachment Object

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| `type` | string | Yes | `screenshot`, `log`, `export`, `video` |
| `hash` | string | Yes | SHA-256 hash of the file |
| `uri` | string | Yes | Storage location (S3, local path, etc.) |

---

## 4. Evidence Collection Rules

### 4.1 Visual Evidence (MUST)

For PQ tests involving a UI, capture at least one screenshot of the terminal state or success criteria.

### 4.2 Log Sanitization (SHOULD)

Scrub PII or secrets from logs before attachment. The engine should support configurable redaction patterns:

```yaml
redaction_patterns:
  - "password=.*"
  - "api_key=.*"
  - "\\b[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Z|a-z]{2,}\\b"
```

### 4.3 Immutability (MUST)

Once generated, the evidence package must be hashed; the hash is sent to the SoR for permanent archival. The package must not be modified after generation.

---

## 5. Storage Requirements

### 5.1 Retention Period

Evidence packages must be retained for the duration required by applicable regulations:

| Regulation | Minimum Retention |
|------------|-------------------|
| 21 CFR Part 11 | Duration of product lifecycle + 2 years |
| EU Annex 11 | Duration of product lifecycle |
| ISO 13485 | Lifetime of device + 2 years minimum |

### 5.2 Integrity Verification

The SoR must be capable of verifying the stored hash matches the original submission at any point during the retention period.

---

## 6. Example: Complete Evidence Package

```json
{
  "execution_id": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
  "timestamp": "2026-02-01T14:30:00Z",
  "commit_sha": "abc123def456789",
  "environment": {
    "os": "ubuntu-22.04",
    "runtime": "node-v18.1.0",
    "container_digest": "sha256:9f86d081884c7d659a2feaa0c55ad015a3bf4f1b2b0b822cd15d6c15b0f00a08",
    "sbom_ref": "evidence/sbom-2026-02-01.json"
  },
  "results": [
    {
      "gxp_id": "LDPC-OQ-001",
      "status": "PASS",
      "duration_ms": 45,
      "logs": [
        "Testing checksum validation...",
        "Input: valid-payload",
        "Expected: true, Actual: true",
        "PASS"
      ],
      "attachments": []
    },
    {
      "gxp_id": "LDPC-PQ-001",
      "status": "PASS",
      "duration_ms": 1250,
      "logs": [
        "End-to-end workflow test starting...",
        "Step 1: Login - OK",
        "Step 2: Submit data - OK",
        "Step 3: Verify checksum - OK",
        "PASS"
      ],
      "attachments": [
        {
          "type": "screenshot",
          "hash": "sha256:e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855",
          "uri": "s3://gxp-evidence/LDPC/PQ-001-final-state.png"
        }
      ]
    }
  ],
  "signature": {
    "signed_by": "BuildAgent-CI-01",
    "hash_method": "SHA-256",
    "value": "3a7bd3e2360a8be4b3c2d4e5f6a7b8c9d0e1f2a3b4c5d6e7f8a9b0c1d2e3f4a5"
  }
}
```

---

## Related RFCs

- [RFC-001: Data Standard](/specs/rfc-001/) — Tag definitions referenced in results
- [RFC-002: Engine Spec](/specs/rfc-002/) — Engine logic that triggers evidence capture
- [RFC-004: API Interface](/specs/rfc-004/) — Evidence upload endpoint
